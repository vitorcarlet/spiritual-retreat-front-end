@startuml name "Sorteio Automático de Famílias"
actor Gestor
participant "Tela de Composição" as Composicao
participant "Backend de Sorteio" as Sorteio
participant "Validador de Conflitos" as Validador
participant "Feedback ao Gestor" as Feedback

Gestor -> Composicao : Clica em "SORTEAR"

Composicao -> Sorteio : Solicita distribuição aleatória de membros
Sorteio -> Sorteio : Gera famílias automaticamente
Sorteio -> Validador : Verifica conflitos de cônjuges/parentes
Validador --> Sorteio : Retorna status de integridade

alt Conflitos encontrados
    Sorteio -> Feedback : Exibe alerta "Ajuste manual necessário"
else Distribuição válida
    Sorteio -> Composicao : Atualiza layout das famílias
    Composicao -> Feedback : Exibe confirmação e distribuição
end
@enduml
