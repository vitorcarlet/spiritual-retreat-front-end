@startuml name "Envio de Mensagem de Contemplação"
actor Gestor
participant "Módulo de Retiros" as ModuloRetiros
participant "Detalhes do Retiro" as Detalhes
participant "Tela de Contemplação" as Contemplacao
participant "Modal de Mensagens" as Modal
participant "Backend de Mensagens" as BackendMsg
participant "Plataformas de Envio" as Plataformas

== Acesso à tela de contemplação ==
Gestor -> ModuloRetiros : Acessa módulo de gestão de retiros
ModuloRetiros -> ModuloRetiros : Exibe lista de retiros
Gestor -> ModuloRetiros : Clica em "Ver mais"
ModuloRetiros -> Detalhes : Abre tela de detalhes
Gestor -> Detalhes : Seleciona aba "Contemplações"
Detalhes -> Contemplacao : Exibe tela de contemplação

== Filtros e seleção ==
Gestor -> Contemplacao : Aplica filtros (status, cidade, etc.)
Gestor -> Contemplacao : Seleciona participantes contemplados

== Montagem da mensagem ==
Gestor -> Modal : Abre modal de envio de mensagem
Modal -> Modal : Carrega variáveis (#NOME#, #URL#, #PARTICIPANTEID#)
Gestor -> Modal : Escreve mensagem personalizada e seleciona canais (WhatsApp, Email)
Modal -> BackendMsg : Enviar mensagem para processamento

== Disparo para plataformas ==
BackendMsg -> Plataformas : Envia mensagens personalizadas para canais
Plataformas --> BackendMsg : Confirma envio
BackendMsg --> Modal : Retorno de sucesso

Modal -> Gestor : Exibe confirmação de envio
@enduml
